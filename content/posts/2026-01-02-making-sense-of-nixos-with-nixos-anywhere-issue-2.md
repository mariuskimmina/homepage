---
title: "Making sense of NixOS with nixos-anywhere - toolbox #2"
date: 2026-01-02T17:22:48Z
description: "Using nix as an IaC tool"
draft: false
---

*Originally published at [Leaflet](https://toolbox.leaflet.pub/3mbhfupgzu22l)*

<div class="postContent flex flex-col"><p><span class="                                                 ">Now, this might just be me, but I was trying to love nix &amp; nixos for a while already but whenever I tired to use for my personal projects or as a operating system for my personal computer but then I always felt like it got in the way at times.</span></p><p><span class="                                                 ">On a personal computer I might spontaneously have to install proprietary software, like zoom, to get my work done and NixOS makes that a pain. I always went back to arch after a while but the thought of it&#x27;s declarative beauty was still lingering in my mind.</span></p><p><span class="                                                 ">I recently heard more and more people using NixOS for their servers and production workloads and, thinking about it, that makes perfect sense. I will never ever need to install zoom or the like on a server. But I do care a lot about being in control of exactly what is installed on it, especially when running production workloads. Being able to define everything in a declarative configuration and check it into version control.</span></p><p><span class="                                                 ">The problem with that at first seemed to be that most cloud providers simply don&#x27;t offer NixOS (yet) but that also appears to be a very solvable problem since there is </span><a href="https://github.com/nix-community/nixos-anywhere" class="text-accent-contrast hover:underline                                                  " target="_blank">nixos-anywhere</a><span class="                                                 ">. This tool turns any cloud VM into a NixOS machine using </span><code class="       inline-code                                          ">kexec</code><span class="                                                 ">. I tried it today and I am blown away by how well it works.</span></p><p><span class="                                                 ">I have followed the setup of </span><a href="https://github.com/nix-community/nixos-anywhere-examples" class="text-accent-contrast hover:underline                                                  " target="_blank">nixos-anywhere-examples</a><span class="                                                 "> and turned a Hetzner Ubuntu machine into NixOS in just a few minutes and a single command</span></p><div class="w-full min-h-[42px] rounded-md border-border-light outline-border-light selected-outline"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6F42C1">nix</span><span style="color:#032F62"> run</span><span style="color:#032F62"> nixpkgs#nixos-anywhere</span><span style="color:#005CC5"> --</span><span style="color:#005CC5"> --flake</span><span style="color:#032F62"> .generic</span><span style="color:#005CC5"> --generate-hardware-config</span><span style="color:#032F62"> nixos-generate-config</span><span style="color:#032F62"> ./hardware-configuration.nix</span><span style="color:#032F62"> root@</span><span style="color:#D73A49">&#x3C;</span><span style="color:#032F62">your-i</span><span style="color:#24292E">p</span><span style="color:#D73A49">></span></span></code></pre></div><p><span class="                                                 ">And now all configuration files for this machine are on my local computer, I can edit them and check them into version control. And when I want to apply a change it&#x27;s again just one command</span></p><div class="w-full min-h-[42px] rounded-md border-border-light outline-border-light selected-outline"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6F42C1">nix</span><span style="color:#032F62"> run</span><span style="color:#032F62"> nixpkgs#nixos-rebuild</span><span style="color:#005CC5"> --</span><span style="color:#032F62"> switch</span><span style="color:#005CC5"> --flake</span><span style="color:#032F62"> .#generic</span><span style="color:#005CC5"> --target-host</span><span style="color:#032F62"> root@</span><span style="color:#D73A49">&#x3C;</span><span style="color:#032F62">your-i</span><span style="color:#24292E">p</span><span style="color:#D73A49">></span></span></code></pre></div><p><span class="                                                 "></span></p><p><span class="                                                 ">You can find the config here: <br/></span><a href="https://tangled.org/mariuskimmina.com/nix-hetzner-lab" class="text-accent-contrast hover:underline                                                  " target="_blank">https://tangled.org/mariuskimmina.com/nix-hetzner-lab</a><span class="                                                 "><br/><br/>For now it&#x27;s just a minimal edit of the example repo but I have some plans for a project I want to host this way and to see how nix as IaC tool will hold up.</span></p><p><span class="                                                 "></span></p><p><span class="                                                 ">... maybe someday I will also get back to it for my personal computer once again ...</span></p></div>
